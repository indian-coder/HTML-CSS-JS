<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bee Inc ‚Äî Beehive Idle (Egg‚ÄëInc style)</title>
<style>
  :root{--bg:#081226;--panel:#0e1622;--accent:#ffd166;--muted:#9aa4b2;--card:#0b1220}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,Segoe UI,Roboto,system-ui;background:linear-gradient(180deg,#041023 0%,#081226 100%);color:#e6eef6}
  header{display:flex;align-items:center;gap:12px;padding:16px 20px}
  h1{margin:0;font-size:18px;color:var(--accent)}
  .app{display:flex;gap:14px;padding:0 20px 20px}
  .left{flex:1;min-height:640px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:12px;display:flex;flex-direction:column}
  canvas{border-radius:10px;background:radial-gradient(circle at 40% 30%, rgba(255,220,120,0.04), transparent 20%), linear-gradient(180deg,#061226,#04121a);flex:1}
  .hud{display:flex;gap:8px;align-items:center;margin-top:10px}
  .stat{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;min-width:120px}
  .right{width:420px;display:flex;flex-direction:column;gap:12px}
  .panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:12px;border-radius:12px}
  .row{display:flex;align-items:center;justify-content:space-between;margin:6px 0}
  .btn{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--accent);cursor:pointer}
  .buy{background:linear-gradient(180deg,#154e2d,#0f361e);color:#fff;border:none}
  .small{font-size:13px;color:var(--muted)}
  .list{max-height:340px;overflow:auto;margin-top:8px}
  .beeItem{display:flex;align-items:center;gap:8px;padding:8px;border-radius:8px;margin-bottom:6px;background:rgba(255,255,255,0.01)}
  .beeIcon{width:48px;height:48px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700}
  .progress{height:10px;background:rgba(255,255,255,0.03);border-radius:6px;overflow:hidden}
  .bar{height:100%;background:linear-gradient(90deg,#ffd166,#ffb703)}
  footer{padding:12px 20px;color:var(--muted);font-size:12px}
  .boostBtn{background:#ffb703;color:#000;border:none;padding:8px 10px;border-radius:8px;cursor:pointer}
  .rowCenter{display:flex;gap:8px;align-items:center}
  .muted{color:var(--muted)}
  @media(max-width:980px){.right{width:340px}} 
</style>
</head>
<body>
<header>
  <h1>üêù Bee Inc ‚Äî Beehive Idle</h1>
  <div class="muted">Build beehives, recruit bees, boost honey production, and unlock new hive tiers</div>
</header>
<div class="app">
  <div class="left panel">
    <canvas id="view"></canvas>
    <div class="hud">
      <div class="stat"><div class="small">Honey</div><div id="honeyDisplay">0</div></div>
      <div class="stat"><div class="small">HPS</div><div id="hpsDisplay">0 /s</div></div>
      <div class="stat"><div class="small">Hive Tier</div><div id="hiveTierDisplay">1 ‚Äî Meadow Hive</div></div>
      <div style="flex:1"></div>
      <div class="stat"><div class="small">Target</div><div id="targetDisplay">Reach 1,000 honey to unlock Hive 2</div></div>
    </div>
  </div>

  <div class="right">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div><strong>Bees</strong><div class="small">Recruit different bee types ‚Äî 15 unique bees</div></div>
        <div><button id="collectBtn" class="btn buy">Collect Honey</button></div>
      </div>
      <div class="list" id="beeList"></div>
    </div>

    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center"><strong>Boosters</strong><div class="small">Temporary multipliers</div></div>
      <div style="display:flex;gap:8px;margin-top:10px">
        <button class="boostBtn" id="boost1">Sugar Rush (2x, 30s) ‚Äî 200</button>
        <button class="boostBtn" id="boost2">Royal Jelly (5x, 12s) ‚Äî 900</button>
      </div>
      <div style="margin-top:8px" class="small muted">Boosters cost honey and multiply HPS for a limited time. Use strategically to hit targets.</div>
    </div>

    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center"><strong>Beekeepers & Hives</strong><div class="small">Unlock new beehive tiers</div></div>
      <div class="row"><div class="small">Upgrade Hive Tier</div><button id="upgradeHive" class="btn">Upgrade (cost shown)</button></div>
      <div class="small muted" style="margin-top:8px">Each hive tier changes visuals, base efficiency, and unlocks new bees.</div>
    </div>

    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center"><strong>Game</strong><div class="small">Save / Reset</div></div>
      <div class="row" style="margin-top:8px">
        <button id="saveBtn" class="btn">Save</button>
        <button id="loadBtn" class="btn">Load</button>
        <button id="resetBtn" class="btn">Reset</button>
      </div>
    </div>
  </div>
</div>
<footer>Tip: Click "Collect Honey" to manually add a bonus and watch the hive animation. The game auto-produces honey while running.</footer>

<script>
/*
Bee Inc ‚Äî Egg Inc inspired Idle Game
- 15 bee types with different cost, hps contribution, and unlocks
- Multiple hive tiers (beehives) unlocked by honey targets
- Boosters (temporary multipliers)
- Manual collect button (click to harvest)
- Simple visuals on canvas to show bees/hive and growth
- Save/Load/Reset via localStorage
*/

const canvas = document.getElementById('view');
const ctx = canvas.getContext('2d');
let DPR = Math.max(1, window.devicePixelRatio || 1);
function resize(){ const rect = canvas.getBoundingClientRect(); canvas.width = Math.floor(rect.width*DPR); canvas.height = Math.floor(rect.height*DPR); ctx.setTransform(DPR,0,0,DPR,0,0); }
window.addEventListener('resize', resize);
resize();

// Game state
let state = {
  honey: 0,
  totalHoneyEarned: 0,
  beesOwned: Array(15).fill(0),
  hiveTier: 0, // index into hives
  time: 0,
  boostersActive: [],
  lastTick: performance.now(),
};

// Define 15 bee types (tier unlocks tie to hive tier index)
const beeTypes = [
  {id:0,name:'Worker Bee',cost:10, hps:0.4,unlockTier:0,desc:'Basic honey gatherer'},
  {id:1,name:'Forager',cost:60, hps:3,unlockTier:0,desc:'Fast nectar collection'},
  {id:2,name:'Nectar Drone',cost:300, hps:18,unlockTier:0,desc:'Efficient gatherer'},
  {id:3,name:'Wax Maker',cost:1200, hps:75,unlockTier:1,desc:'Builds cells faster'},
  {id:4,name:'Royal Attendant',cost:4800, hps:320,unlockTier:1,desc:'Boosts royal production'},
  {id:5,name:'Comb Architect',cost:20000, hps:1400,unlockTier:1,desc:'Structures hive optimally'},
  {id:6,name:'Harvest Specialist',cost:88000, hps:6200,unlockTier:2,desc:'Mass harvests nectar'},
  {id:7,name:'Honey Alchemist',cost:400000, hps:28000,unlockTier:2,desc:'Converts nectar into honey faster'},
  {id:8,name:'Queen's Guard',cost:2e6, hps:130000,unlockTier:2,desc:'Protects productivity'},
  {id:9,name:'Solar Forager',cost:1e7, hps:600000,unlockTier:3,desc:'Uses sun pathing'},
  {id:10,name:'Cryo Worker',cost:5e7, hps:2.6e6,unlockTier:3,desc:'Preserves nectar longer'},
  {id:11,name:'Nano Bee',cost:2.5e8, hps:12e6,unlockTier:4,desc:'Micro-efficiency'},
  {id:12,name:'Aerobee',cost:1.2e9, hps:55e6,unlockTier:4,desc:'High-altitude harvest'},
  {id:13,name:'Stellar Bee',cost:6e9, hps:260e6,unlockTier:5,desc:'Cosmic pollen collectors'},
  {id:14,name:'Mythic Queen',cost:3e10, hps:1.4e9,unlockTier:6,desc:'Legendary output'},
];

// Hive tiers ‚Äî each with a target to unlock next
const hives = [
  {name:'Meadow Hive', target:1000, baseMultiplier:1, visual:'meadow'},
  {name:'Flowercroft', target:25000, baseMultiplier:1.4, visual:'flowers'},
  {name:'Sunroof Dome', target:500000, baseMultiplier:2.2, visual:'sun'},
  {name:'Crystal Apiary', target:6e6, baseMultiplier:4.0, visual:'crystal'},
  {name:'Cloud Hive', target:1.2e8, baseMultiplier:9, visual:'clouds'},
  {name:'Galactic Hive', target:3e9, baseMultiplier:28, visual:'stars'},
  {name:'Mythic Palace', target:1e11, baseMultiplier:100, visual:'mythic'},
];

// Boosters definitions
const boosters = [
  {id:'sugar', name:'Sugar Rush', mult:2, duration:30, cost:200},
  {id:'royal', name:'Royal Jelly', mult:5, duration:12, cost:900},
];

// UI elements
const honeyDisplay = document.getElementById('honeyDisplay');
const hpsDisplay = document.getElementById('hpsDisplay');
const hiveTierDisplay = document.getElementById('hiveTierDisplay');
const targetDisplay = document.getElementById('targetDisplay');
const beeList = document.getElementById('beeList');
const collectBtn = document.getElementById('collectBtn');
const boost1 = document.getElementById('boost1');
const boost2 = document.getElementById('boost2');
const upgradeHiveBtn = document.getElementById('upgradeHive');
const saveBtn = document.getElementById('saveBtn');
const loadBtn = document.getElementById('loadBtn');
const resetBtn = document.getElementById('resetBtn');

// Helpers
function format(n){
  if(n < 1000) return Math.floor(n);
  const units = ['K','M','B','T','Qa','Qi','Sx'];
  let u = -1; while(n >= 1000 && u < units.length-1){ n /= 1000; u++; }
  return n.toFixed( (n>=100)?0: (n>=10)?1:2 ) + units[u];
}

function calculateBaseHPS(){
  // sum of bees' hps * count * hive base multiplier
  let sum = 0;
  for(let i=0;i<beeTypes.length;i++) sum += (beeTypes[i].hps || 0) * state.beesOwned[i];
  const tierMul = hives[state.hiveTier].baseMultiplier;
  // boosters multiply further
  let boostMul = 1;
  state.boostersActive.forEach(b=> boostMul *= b.mult);
  return sum * tierMul * boostMul;
}

function updateUI(){
  honeyDisplay.textContent = format(state.honey);
  const hps = calculateBaseHPS();
  hpsDisplay.textContent = format(hps) + ' /s';
  hiveTierDisplay.textContent = (state.hiveTier+1)+' ‚Äî '+hives[state.hiveTier].name;
  targetDisplay.textContent = 'Reach '+format(hives[Math.min(hives.length-1, state.hiveTier+1)].target)+ ' honey to unlock Hive ' + (state.hiveTier+2);
  upgradeHiveBtn.textContent = 'Upgrade (Cost: '+format(hives[state.hiveTier+1]?.target || 0)+')';
}

// Build bee list UI
function refreshBeeList(){
  beeList.innerHTML = '';
  for(let i=0;i<beeTypes.length;i++){
    const t = beeTypes[i];
    const unlocked = t.unlockTier <= state.hiveTier;
    const item = document.createElement('div'); item.className='beeItem';
    const icon = document.createElement('div'); icon.className='beeIcon'; icon.style.background = unlocked? 'linear-gradient(180deg,#ffd166,#ffb703)':'rgba(255,255,255,0.03)'; icon.style.color = unlocked?'#6b3e00':'#666'; icon.textContent = t.name.split(' ')[0].slice(0,2).toUpperCase();
    const info = document.createElement('div'); info.style.flex='1';
    const title = document.createElement('div'); title.innerHTML = `<strong>${t.name}</strong> <span class="small muted">x${state.beesOwned[i]}</span>`;
    const sub = document.createElement('div'); sub.className='small muted'; sub.textContent = t.desc+' ‚Äî HPS: '+format(t.hps)+' ‚Äî Cost: '+format(t.cost);
    const buy = document.createElement('button'); buy.className = 'btn buy'; buy.textContent = 'Buy'; buy.disabled = !unlocked;
    buy.onclick = ()=>{ if(state.honey >= t.cost){ state.honey -= t.cost; state.beesOwned[i]++; state.totalHoneyEarned += 0; save(); refreshBeeList(); updateUI(); } };
    info.appendChild(title); info.appendChild(sub);
    item.appendChild(icon); item.appendChild(info); item.appendChild(buy);
    beeList.appendChild(item);
  }
}

collectBtn.onclick = ()=>{ // manual collect gives a chunk based on hps & random
  const bonus = Math.max(1, calculateBaseHPS()*0.5 + Math.random()*calculateBaseHPS());
  state.honey += bonus; state.totalHoneyEarned += bonus; spawnCollectEffect(bonus);
  save(); updateUI();
};

boost1.onclick = ()=> triggerBooster('sugar');
boost2.onclick = ()=> triggerBooster('royal');

upgradeHiveBtn.onclick = ()=>{
  if(state.hiveTier >= hives.length-1) return;
  const cost = hives[state.hiveTier+1].target;
  if(state.totalHoneyEarned >= cost){ state.hiveTier++; refreshBeeList(); save(); updateUI(); spawnTierUpEffect(); }
  else alert('You need total earned honey of '+format(cost)+' to unlock next hive.');
}

saveBtn.onclick = save;
loadBtn.onclick = load;
resetBtn.onclick = ()=>{ if(confirm('Reset game?')){ localStorage.removeItem('beeinc_save'); location.reload(); } };

function triggerBooster(id){
  const b = boosters.find(x=>x.id===id); if(!b) return;
  if(state.honey < b.cost){ alert('Not enough honey for booster'); return; }
  state.honey -= b.cost; state.boostersActive.push({id:b.id, mult:b.mult, end: performance.now()/1000 + b.duration}); save(); spawnBoosterEffect(b); updateUI();
}

// Save/Load
function save(){ localStorage.setItem('beeinc_save', JSON.stringify(state)); }
function load(){ const s = localStorage.getItem('beeinc_save'); if(s){ state = JSON.parse(s); refreshBeeList(); updateUI(); } }

// Visual effects
let effects = [];
function spawnCollectEffect(amount){ effects.push({type:'collect', x:canvas.clientWidth/2 + (Math.random()-0.5)*200, y:canvas.clientHeight/2 + (Math.random()-0.5)*80, t:0, text:'+'+format(amount)}); }
function spawnBoosterEffect(b){ effects.push({type:'boost', x:100+Math.random()*200, y:100, t:0, text:b.name}); }
function spawnTierUpEffect(){ effects.push({type:'tier', x:canvas.clientWidth/2, y:120, t:0, text:'Tier Up!'}); }

// Canvas draw
let last = performance.now();
function tick(now){
  const dt = Math.min(0.08, (now - last)/1000); last = now; state.time += dt;

  // Update boosters: remove expired
  const nowSec = now/1000;
  state.boostersActive = state.boostersActive.filter(b=> b.end > nowSec);

  // Honey production
  const hps = calculateBaseHPS();
  state.honey += hps * dt; state.totalHoneyEarned += hps * dt;

  updateUI(); draw(); requestAnimationFrame(tick);
}
requestAnimationFrame(tick);

function draw(){
  ctx.clearRect(0,0,canvas.width/DPR, canvas.height/DPR);
  // background
  const w = canvas.clientWidth; const h = canvas.clientHeight;
  // draw hive visual based on tier
  ctx.save();
  // center hive
  ctx.translate(w/2, h/2 - 40);
  drawHiveVisual(state.hiveTier);
  ctx.restore();

  // draw bees as flying particles around
  drawBeesParticles();

  // draw effects
  for(let i=effects.length-1;i>=0;i--){ const e = effects[i]; e.t += 0.02; ctx.globalAlpha = Math.max(0,1 - e.t); ctx.fillStyle='#ffd166'; ctx.font='700 16px Inter'; ctx.fillText(e.text, e.x, e.y - e.t*60); if(e.t > 1) effects.splice(i,1); }
  ctx.globalAlpha = 1;
}

function drawHiveVisual(tier){
  // simple stylized hive layers ‚Äî more elaborate per tier
  const scale = 1 + tier*0.18;
  // base honeycomb circles
  const rings = 5 + Math.min(6,tier*2);
  const maxR = 160 * scale;
  for(let r= rings; r>=1; r--){
    const alpha = 0.06 + 0.06*(r/rings) + 0.02*tier;
    ctx.beginPath(); ctx.fillStyle = `rgba(255,209,102,${alpha})`;
    ctx.arc(0,0, maxR * (r/rings)*0.9, 0, Math.PI*2); ctx.fill();
  }
  // center queen cell
  ctx.beginPath(); ctx.fillStyle='#ffefb3'; ctx.strokeStyle='#ffd166'; ctx.lineWidth=4; ctx.arc(0,0,36*scale,0,Math.PI*2); ctx.fill(); ctx.stroke();
  // tier label
  ctx.font = '700 18px Inter'; ctx.fillStyle='#fff'; ctx.textAlign='center'; ctx.fillText(hives[tier].name, 0, 220*scale);
}

let particlePool = [];
function drawBeesParticles(){
  // generate particles based on bees owned and hps
  const totalBees = state.beesOwned.reduce((a,b)=>a+b,0);
  const count = Math.min(250, Math.floor(totalBees*0.6 + calculateBaseHPS()/1000));
  while(particlePool.length < count) particlePool.push({x:canvas.clientWidth/2 + (Math.random()-0.5)*260, y:canvas.clientHeight/2 + (Math.random()-0.5)*140, vx:(Math.random()-0.5)*1.6, vy:(Math.random()-0.5)*0.6, carry: Math.random()<0.18});
  particlePool.forEach(p=>{
    // move
    p.x += p.vx; p.y += Math.sin((p.x+p.y)/40 + state.time*3)*0.6 + p.vy;
    // wrap
    if(p.x < 40) p.x = canvas.clientWidth-40; if(p.x > canvas.clientWidth-40) p.x = 40;
    // draw
    ctx.beginPath(); ctx.fillStyle = p.carry ? '#ffd166' : '#fff3b8'; ctx.globalAlpha = 0.9; ctx.arc(p.x,p.y, 3 + (p.carry?1.5:0),0,Math.PI*2); ctx.fill(); ctx.globalAlpha=1;
  });
  // trim
  if(particlePool.length > count) particlePool.splice(count);
}

// Game loop helper: recalc UI and list
setInterval(()=>{ refreshBeeList(); updateUI(); save(); }, 800);

// Autosave
setInterval(()=> save(), 5000);

// Load if available
if(localStorage.getItem('beeinc_save')) load(); else { updateUI(); refreshBeeList(); }

// keyboard cheat for testing (press U to add honey)
window.addEventListener('keydown', (e)=>{ if(e.key==='u'){ state.honey += 10000; state.totalHoneyEarned += 10000; } if(e.key==='o'){ state.totalHoneyEarned += 1e6; } });

</script>
</body>
</html>
